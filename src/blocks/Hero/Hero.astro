---
import { ConditionalWrapper } from 'webcoreui/astro'

import AvatarWithRating from '@blocks/AvatarWithRating/AvatarWithRating.astro'
import Button from '@blocks/Button/Button.astro'

import type { HeroProps } from './hero'
import styles from './hero.module.scss'

interface Props extends HeroProps {}

const {
    badge,
    heading,
    subHeading,
    buttons,
    avatarWithRating,
    image,
    reverse,
    className
} = Astro.props

const classes = [
    styles.hero,
    image?.src && 'flex column justify-between sm-row sm-items-center',
    reverse && 'sm-row-reverse',
    className
]
---

<section class:list={classes}>
    <ConditionalWrapper condition={!!image?.src}>
        <div slot="wrapper" class={styles.wrapper}>children</div>
        {badge && (
            <Button {...badge} badge={true} className={styles.badge} />
        )}
        <h1>{heading}</h1>
        {subHeading && <h2>{subHeading}</h2>}

        {!!buttons?.length && (
            <div class:list={[styles.cta, 'flex xs wrap']}>
                {buttons?.map(button => <Button {...button} />)}
            </div>
        )}

        {avatarWithRating && (
            <AvatarWithRating
                {...avatarWithRating}
                className={styles.avatar}
            />
        )}
    </ConditionalWrapper>

    {image?.src && (
        <img
            src={image.src}
            alt={image.alt}
            width={image.width}
            height={image.height}
        />
    )}
</section>
